#
#
# This script doesn't install CMake and does not pull down the source to compile
# Rather - this only checks for dependencies and installs those not found
# This can be used in conjunction with the precompiled Binaries
#


#!/bin/bash

echo xmranon - NERVA MacOS Installer

#Install xcode
xcode-select --install



# Check that Homebrew is installed and install if not
if test ! $(which brew)
then
  echo "  Installing Homebrew for you."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" > /tmp/homebrew-install.log
fi

# Update any existing homebrew recipes
/usr/local/bin/brew update

# Upgrade any already installed shizz
/usr/local/bin/brew upgrade --all

# Install desired packages
/usr/local/bin/brew install git
/usr/local/bin/brew install zeromq
/usr/local/bin/brew install openSSL
/usr/local/bin/brew install PkgConfig
echo "OpenSSL successfully installed"
/usr/local/bin/brew install readline
/usr/local/bin/brew install boost
echo "Boost successfully installed"
/usr/local/bin/brew install miniupnpc
echo "miniupnpc successfully installed"
/usr/local/bin/brew  tap jmuncaster/homebrew-header-only
/usr/local/bin/brew install jmuncaster/header-only/cppzmq
export OPENSSL_ROOT_DIR=/usr/local/Cellar/openssl/1.0.2p/
export OPENSSL_INCLUDE_DIR=/usr/local/Cellar/openssl/1.0.2p/include/
/usr/local/bin/cmake -DOPENSSL_ROOT_DIR=/usr/local/Cellar/openssl/1.0.2p/
/usr/local/bin/cmake -DOPENSSL_LIBRARIES=usr/local/Cellar/openssl/lib
/usr/local/bin/cmake -DOPENSSL_INCLUDE_DIR=/usr/local/Cellar/openssl/1.0.2p/include/
echo "CMake successfully installed"
# Remove brew shizz
/usr/local/bin/brew  cleanup

